<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Service</title>

    <!-- Linking CSS Files -->
    <link rel="stylesheet" href="styles/style.css">

    <!-- Hind Madurai Font -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Madurai:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Making Font Awesome Icons Available -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <!-- Inter Font -->
     <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">

</head>

<body class="hind-madurai-regular">
    <header>
        <!-- Nav Bar Started -->
        <nav class="nav-bar">
            <div class="name-logo">
                <img src="assets/logo.png" alt="Logo of Bangladesh Government" class="nav-gov-logo">
                <p>EMERGENCY SERVICE</p>
            </div>
            <div class="nav-right-plane">
                <div class="heart-count">
                    <p id="heart-count">0</p>
                    <img src="assets/heart.png" alt="Heart Logo" class="heart-logo">
                </div>
                <div class="coin-count">
                    <p id="coin-count">100</p>
                    <img src="assets/coin.png" alt="Coin Logo" class="coin-logo">
                </div>
                <div class="copy-count">
                    <p id="copy-count">2</p>
                    <p>Copy</p>
                </div>
            </div>
        </nav>
        
        <!-- Hero Section Started -->
        <div class="hero-section">
            <img src="assets/logo-dark.png" alt="BD Government Logo" class="hero-logo">
            <h3 class="hero-title">Emergency Service Directory</h3>
            <p class="hero-description">Government Emergency Services at Your Fingertip – A Project by  Government of the People’s Republic of Bangladesh</p>
        </div>
    </header>
    
    <main>
        <div class="main-section">
            <div class="card-section">
                <!-- 1st Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/emergency.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">National Emergency Number</h3>
                    <p class="card-description">National Emergency</p>
                    <p class="dialing-number">999</p>
                    <p class="service-category">All</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 2nd Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div id="police-container-color" class="card-icon-container">
                            <img src="assets/police.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Police Helpline Number</h3>
                    <p class="card-description">Police</p>
                    <p class="dialing-number">999</p>
                    <p class="service-category">Police</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 3rd Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/fire-service.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Fire Service Number</h3>
                    <p class="card-description">Fire Service</p>
                    <p class="dialing-number">999</p>
                    <p class="service-category">Fire</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 4th Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/ambulance.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Ambulance Service</h3>
                    <p class="card-description">Ambulance</p>
                    <p class="dialing-number">1994-999999</p>
                    <p class="service-category">Health</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 5th Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/woman-girl-96.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Women & Child Helpline</h3>
                    <p class="card-description">Women & Child Helpline</p>
                    <p class="dialing-number">109</p>
                    <p class="service-category">Help</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 6th Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/anti-corruption.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Anti-Corruption Helpline</h3>
                    <p class="card-description">Anti-Corruption</p>
                    <p class="dialing-number">106</p>
                    <p class="service-category">Govt.</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 7th Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/electricity-icon.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Electricity Helpline</h3>
                    <p class="card-description">Electricity Outage</p>
                    <p class="dialing-number">16216</p>
                    <p class="service-category">Electricity</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 8th Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/brac.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Brac Helpline</h3>
                    <p class="card-description">Brac</p>
                    <p class="dialing-number">16445</p>
                    <p class="service-category">NGO</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

                <!-- 9th Card -->
                <div class="card-item">
                    <div class="card-top-section">
                        <div class="card-icon-container">
                            <img src="assets/train-solid-full.png" alt="" class="icon">
                        </div>
                        <i id="" class="fa-solid fa-heart heart-icon" onclick="heartClick(event)"></i>
                    </div>
                    <h3 class="card-title">Bangladesh Railway Helpline</h3>
                    <p class="card-description">Bangladesh Railway</p>
                    <p class="dialing-number">163</p>
                    <p class="service-category">Travel</p>
                    <div class="card-button-section">
                        <button class="card-button copy-button" onclick="copyNumber(event)"><i class="fa-regular fa-copy"></i> Copy</button>
                        <button class="card-button call-button" onclick="callingService(event)"><i class="fa-solid fa-phone"></i> Call</button>
                    </div>
                </div>

            </div>
            
            
            <!-- History Section -->
            <div class="history-section">
                <div class="history-top-section">
                    <div class="history-title">
                        <i class="fa-regular fa-clock"></i>
                        <h4>Call History</h4>
                    </div>
                    <button onclick="clearHistory()">Clear</button>
                </div>
                
                <!-- <div class="new-history">
                    <div class="new-history-service-details">
                        <p class="new-history-service-title">Fire Service Number</p>
                        <p class="new-history-service-number">999</p>
                    </div>
                    <div>
                        <p class="calling-time">11:36:58 AM</p>
                    </div>
                </div> -->
                
            </div>

        </div>
    </main>

    <script>
        // const hearIcons = document.getElementsByClassName('heart-icon');
        // for(let icon of hearIcons){
        //     console.log(icon);
        // }
        function heartClick(event){
            // console.log('Heart Clicked');

            if(event.target.style.color !== 'red'){

                // to set the color of the heart icon to red
                event.target.style.color = 'red';

                // get the number from <p> and convert it into number
                let currentHeartCount = Number((document.getElementById('heart-count')).innerText);
                
                // increase the heart count
                currentHeartCount++;

                // set the heart count
                document.getElementById('heart-count').innerText = currentHeartCount;
            }
            else{
                alert("Already Clicked and Liked!");
            }
        }

        function callingService(event){
            
            if(Number((document.getElementById('coin-count')).innerText) >= 20){
                // getting parent node
                let parentNode = (event.target.parentNode).parentNode;
                // getting the service title
                let serviceTitle = parentNode.querySelector('h3').innerText;
                // getting the dialing service number
                let serviceNumber = parentNode.querySelector('.dialing-number').innerText;
                // generating the message
                let message = "Calling " + serviceTitle + " "+ serviceNumber + "!";
                alert(message);
                // adjusting coin count
                let currentCoinCount = Number((document.getElementById('coin-count')).innerText);
                currentCoinCount = currentCoinCount - 20;
                (document.getElementById('coin-count')).innerText = currentCoinCount;

                // logging call history
                // creating the new history container
                let newHistory = document.createElement('div');
                newHistory.className = 'new-history';

                // creating new history service details 
                let serviceDetails = document.createElement('div');
                serviceDetails.className = 'new-history-service-details';

                // creating new history service title
                let title = document.createElement('p');
                title.className = 'new-history-service-title';
                title.innerText = serviceTitle;

                // creating new history service number
                let number = document.createElement('p');
                number.className = 'new-history-service-number';
                number.innerText = serviceNumber;

                // appending service title and number to service details
                serviceDetails.appendChild(title);
                serviceDetails.appendChild(number);

                // creating history calling time
                // function getting dynamic time
                function getCurrentTime() {
                    let now = new Date();
                    return now.toLocaleTimeString(); // e.g., "9:49:00 PM"
                }

                let time = document.createElement('p');
                time.className = 'calling-time';
                time.innerText = getCurrentTime();

                // appending history service details and calling time to the container
                newHistory.appendChild(serviceDetails);
                newHistory.appendChild(time); 

                // append new calling history to the history section
                let historySection = document.querySelector('.history-section');
                historySection.appendChild(newHistory);
            }

            else{
                alert("Not Enough Coin!");
            }
        }

        function clearHistory(){
            alert("Clear Button Clicked!")
            let historySection = document.querySelector('.history-section');
            let callHistories = historySection.querySelectorAll('.new-history');
            for(let callHistory of callHistories){
                callHistory.innerHTML = '';
            }
        }

        function copyNumber(event){
            // alert("Number Copied!");
            let currentCopyCount = Number((document.getElementById('copy-count')).innerText);
            currentCopyCount++;
            document.getElementById('copy-count').innerText = currentCopyCount;

            // getting parent node
            let parentNode = (event.target.parentNode).parentNode;
            // getting the dialing service number
            let serviceNumber = parentNode.querySelector('.dialing-number').innerText;

            navigator.clipboard.writeText(serviceNumber)
                .then(() => {
                    let message = "Number copied: " + serviceNumber;
                    alert(message);
                })
        }

    </script>
    
</body>
</html>